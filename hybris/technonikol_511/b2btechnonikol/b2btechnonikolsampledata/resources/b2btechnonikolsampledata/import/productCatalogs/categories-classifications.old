# ImpEx for Importing Category Classifications into tn Store;;;;;;;;
;;;;;;;;
# Macros / Replacement Parameter definitions;;;;;;;;
$productCatalog=tnProductCatalog;;;;;;;;
$catalogVersion=catalogversion(catalog(id[default=$productCatalog]),version[default='Online'])[unique=true,default=$productCatalog:Online];;;;;;;;
$classCatalogVersion=catalogversion(catalog(id[default='tnClassification']),version[default='1.0'])[unique=true,default='tnClassification:1.0'];;;;;;;;
$classSystemVersion=systemVersion(catalog(id[default='tnClassification']),version[default='1.0'])[unique=true];;;;;;;;
$class=classificationClass(ClassificationClass.code,$classCatalogVersion)[unique=true];;;;;;;;
$supercategories=source(code, $classCatalogVersion)[unique=true];;;;;;;;
$categories=target(code, $catalogVersion)[unique=true];;;;;;;;
$attribute=classificationAttribute(code,$classSystemVersion)[unique=true];;;;;;;;
$unit=unit(code,$classSystemVersion);;;;;;;;
;;;;;;;;
# Insert Classifications;;;;;;;;
INSERT_UPDATE ClassificationClass;$classCatalogVersion;code[unique=true];allowedPrincipals(uid)[default='customergroup'];;;;;
;;cc1;;;;;;
;;cc2;;;;;;
;;;;;;;;
;;;;;;;;
# Insert Classification Attributes;;;;;;;;
INSERT_UPDATE ClassificationAttribute;$classSystemVersion;code[unique=true];name[lang=ru];;;;;
 ;;"attr1";Аттрибут 1
 ;;"attr2";Аттрибут 2
 ;;"attr3";Аттрибут 3
;;;;;;;;
;;;;;;;;
;;;;;;;;
;;;;;;;;
# Links ClassificationClasses to Categories;;;;;;;;
INSERT_UPDATE CategoryCategoryRelation;$categories;$supercategories;;;;;;
 ;cat1;cc1;
 ;cat2;cc2;
 ;;;;;;;;


INSERT_UPDATE ClassAttributeAssignment;$class;$attribute;position;$unit;attributeType(code[default=string]);multiValued[default=false];range[default=false];localized[default=true]
 ;cc1;"attr1";1
 ;cc2;"attr1";2
 ;cc1;"attr2";2

 
 